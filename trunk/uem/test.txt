UEM.addEventListener=function(type,fnc,useCapture){if(this.self&&!UEM.ADD_TO_WINDOW){if(type=='load')window.attachEvent('onload',function(){var e=UEM.createEventObject(window.event);fnc(e);});else{UEM.ADD_TO_WINDOW=true;arguments.callee.call(window,type,fnc,useCapture);UEM.ADD_TO_WINDOW=false;}return;}type=UEM.getEventType(type);var eType='UEM'+type;if(!this[eType])this[eType]=new Array();var l=this[eType].length;for(var i=0;i<l;i++){if(this[eType][i].fnc==fnc&&this[eType][i].useCapture===useCapture)return;}if(useCapture){for(var i=0;i<l;i++){if(!this[eType][i].useCapture)break;}var bHandlers=this[eType].splice(i,this[eType].length-i);this[eType][i]={};this[eType][i].useCapture=useCapture;this[eType][i].fnc=fnc;this[eType]=this[eType].concat(bHandlers);}else{this[eType][l]={};this[eType][l].useCapture=useCapture;this[eType][l].fnc=fnc;}this['on'+type]=UEM.wrapper;};window.addEventListener=UEM.addEventListener;window.removeEventListener=UEM.removeEventListener;window.dispatchEvent=UEM.dispatchEvent;window.removeAllEventListeners=UEM.removeAllEventListeners;document.addEventListener=UEM.addEventListener;document.removeEventListener=UEM.removeEventListener;document.dispatchEvent=UEM.dispatchEvent;document.removeAllEventListeners=UEM.removeAllEventListeners;HTMLElement.prototype.addEventListener=UEM.addEventListener;HTMLElement.prototype.removeEventListener=UEM.removeEventListener;HTMLElement.prototype.dispatchEvent=UEM.dispatchEvent;HTMLElement.prototype.removeAllEventListeners=UEM.removeAllEventListeners;UEM.canHaveEvents=function(tag){var a=UEM.noEvents;var l=a.length;for(var i=0;i<l;i++){if(a[i]==tag)return false;}return true;};UEM.noEvents=['br','style','script','head','meta','link','title'];document.createEvent=function(eventClass,e){if(eventClass=='Event'||eventClass=='HTMLEvent'||eventClass=='UIEvent'||eventClass=='TextEvent'||eventClass=='MouseEvent'||eventClass=='KeyboardEvent'||eventClass=='MutationEvent'){if(eventClass=='HTMLEvent')eventClass='Event';return new window[eventClass](e);}else throw new Error('UEM: Event class not supported.');};UEM.createEventObject=function(ie_event){var eClass=UEM.getEventClass(ie_event.type);var e=new window[eClass](ie_event);e.initUEMEvent(ie_event);var bubbles=UEM.doesBubble(ie_event.type);var cancelable=ie_event.cancelable!==false||ie_event.cancelable===undefined?UEM.isCancelable(ie_event.type): false;switch(eClass){case 'Event': e.initEvent(ie_event.type,bubbles,cancelable);break;case 'UIEvent': e.initUIEvent(ie_event.type,bubbles,cancelable,window,null);break;case 'MouseEvent': var detail=null;if(ie_event.type=='dblclick')detail=2;else if(ie_event.type=='click'||ie_event.type=='mouseup'||ie_event.type=='mousedown')detail=1;else if(ie_event.type=='mousewheel')detail=-1*ie_event.wheelDelta/40;var button=UEM.getButton(ie_event.button);var relatedTarget=null;if(ie_event.type=='mouseout')relatedTarget=ie_event.toElement;else if(ie_event.type=='mouseover')relatedTarget=ie_event.fromElement;e.initMouseEvent(ie_event.type,bubbles,cancelable,window,detail,ie_event.screenX,ie_event.screenY,ie_event.clientX,ie_event.clientY,ie_event.ctrlKey,ie_event.altKey,ie_event.shiftKey,null,button,relatedTarget);break;case 'TextEvent': var data=String.fromCharCode(ie_event.keyCode);e.initTextEvent(ie_event.type,bubbles,cancelable,window,data);e.ctrlKey=ie_event.ctrlKey;e.altKey=ie_event.altKey;e.shiftKey=ie_event.shiftKey;e.metaKey=false;break;case 'KeyboardEvent': var modifiersList='';var keyIdentifier=null;e.keyCode=ie_event.keyCode;if(UEM.getW3CKeyIdentifier){keyIdentifier=UEM.getW3CKeyIdentifier(ie_event.keyCode);}var keyLocation=KeyboardEvent.DOM_KEY_LOCATION_STANDARD;if(ie_event.keyCode==17)keyLocation=ie_event.ctrlLeft?KeyboardEvent.DOM_KEY_LOCATION_LEFT : KeyboardEvent.DOM_KEY_LOCATION_RIGHT;else if(ie_event.keyCode==16)keyLocation=ie_event.shiftLeft?KeyboardEvent.DOM_KEY_LOCATION_LEFT : KeyboardEvent.DOM_KEY_LOCATION_RIGHT;else if(ie_event.keyCode==18)keyLocation=ie_event.altLeft?KeyboardEvent.DOM_KEY_LOCATION_LEFT : KeyboardEvent.DOM_KEY_LOCATION_RIGHT;else if(ie_event.keyCode==91)keyLocation=KeyboardEvent.DOM_KEY_LOCATION_LEFT;else if(ie_event.keyCode==92)keyLocation=KeyboardEvent.DOM_KEY_LOCATION_RIGHT;else if(96<=ie_event.keyCode&&ie_event.keyCode<=105)keyLocation=KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;if(ie_event.ctrlKey)modifiersList+=" Control";if(ie_event.altKey)modifiersList+=" Alt";if(ie_event.shiftKey)modifiersList+=" Shift";if(modifiersList.length>0)modifiersList=modifiersList.substring(1);e.initKeyboardEvent(ie_event.type,bubbles,cancelable,window,keyIdentifier,keyLocation,modifiersList);break;case 'MutationEvent': break;default: break;}return e;};UEM.dispatchEvent=function(e){e.target=this;UEM.wrapper.call(this,e);};UEM.doesBubble=function(type){try{return UEM.eventTable[type].bubbles;}catch(e){throw new Error('UEM: Unsupported event type: '+type);}};UEM.elementEventTypes={allTags:['activate','click','dblclick','focusin','focusout','keydown','keypress','keyup','mousedown','mousemove','mouseout','mouseover','mousewheel','mouseup'],a:['blur','focus'],body:['load','unload'],button:['blur','focus'],form:['reset','submit'],input:['blur','change','focus','select'],label:['blur','focus'],select:['blur','change','focus'],textarea:['blur','change','focus','select']};UEM.eventTable={abort:{cancels: false,bubbles: true,eventClass: 'Event'},activate:{cancels: true,bubbles: true,eventClass: 'UIEvent'},blur:{cancels: false,bubbles: false,eventClass: 'UIEvent'},change:{cancels: false,bubbles: true,eventClass: 'Event'},click:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},contextmenu:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},dblclick:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},error:{cancels: false,bubbles: true,eventClass: 'Event'},focus:{cancels: false,bubbles: false,eventClass: 'UIEvent'},focusin:{cancels: false,bubbles: true,eventClass: 'UIEvent'},focusout:{cancels: false,bubbles: true,eventClass: 'UIEvent'},keydown:{cancels: true,bubbles: true,eventClass: 'KeyboardEvent'},keypress:{cancels: true,bubbles: true,eventClass: 'TextEvent'},keyup:{cancels: true,bubbles: true,eventClass: 'KeyboardEvent'},load:{cancels: false,bubbles: false,eventClass: 'Event'},mousedown:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},mousemove:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},mouseover:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},mouseout:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},mousewheel:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},mouseup:{cancels: true,bubbles: true,eventClass: 'MouseEvent'},reset:{cancels: true,bubbles: true,eventClass: 'Event'},resize:{cancels: false,bubbles: true,eventClass: 'Event'},scroll:{cancels: false,bubbles: true,eventClass: 'Event'},select:{cancels: false,bubbles: true,eventClass: 'Event'},submit:{cancels: true,bubbles: true,eventClass: 'Event'},textInput:{cancels: true,bubbles: true,eventClass: 'TextEvent'},unload:{cancels: false,bubbles: false,eventClass: 'Event'}};UEM.getButton=function(i){switch(i){case 1: return 0;case 4: return 1;default: return i;}};UEM.getEventClass=function(type){try{return UEM.eventTable[type].eventClass;}catch(e){throw new Error('UEM: Unsupported event type: '+type);}};UEM.getEventType=function(type){return UEM.eventTypes[type]?UEM.eventTypes[type]: type;};UEM.eventTypes={DOMActivate: 'activate',DOMFocusIn: 'focusin',DOMFocusOut: 'focusout',DOMMouseScroll: 'mousewheel'};UEM.getIEButton=function(i){switch(i){case 0: return 1;case 1: return 4;default: return i;}};UEM.getPossibleEventTypes=function(tag){return UEM.elementEventTypes.allTags.concat(UEM.elementEventTypes[tag]);};UEM.isCancelable=function(type){try{return UEM.eventTable[type].cancels;}catch(e){throw new Error('UEM: Unsupported event type: '+type);}};if(!HTMLElement)throw new Error('JSL: UEM: HTMLElement is not defined. Confirm that EPE is loaded');window.UEM={};UEM.CAPTURE_ON_TARGET=1;UEM.ADD_TO_WINDOW=false;UEM.removeAllEventListeners=function(type){UEM.getEventType(type);if(type){this['UEM'+type]=null;this['on'+type]=null;}else{}};UEM.removeEventListener=function(type,fnc,useCapture){type=UEM.getEventType(type);var eType='UEM'+type;if(this[eType]){var l=this[eType].length;for(var i=0;i<l;i++){if(this[eType][i].fnc==fnc&&this[eType][i].useCapture===useCapture){for(var j=i;j<l-1;j++){this[eType][j]=this[eType][j+1];}this[eType].length--;if(!this[eType].length){this[eType]=null;this['on'+type]=null;}break;}}}};UEM.wrapper=function(e){if(!e){window.event.cancelBubble=true;var e=UEM.createEventObject(window.event);}var eType='UEM'+e.type;var aCap=[];var aBub=[];var n=this;while((n=n.parentNode)!=null){if(n[eType])aCap.push(n);}if(this==document&&document[eType])aCap.push(document);if(this==window&&window[eType])aCap.push(window);aCap.reverse();if(!e.propagate(aCap,true))return false;e.eventPhase=Event.AT_TARGET;if(this[eType]){var l=this[eType].length;for(var i=0;i<this[eType].length;i++){e.currentTarget=this;if(this!=document){if(!this[eType][i].useCapture||UEM.CAPTURE_ON_TARGET){this[eType][i].fnc.call(this,e);if(e.propagationStopped)return false;if(!this[eType])break;else if(l>this[eType].length){l=this[eType].length;i--;}}}}}if(e.bubbles){n=this;while((n=n.parentNode)!=null){if(n[eType])aBub.push(n);}if(this==document&&document[eType])aBub.push(document);if(this==window&&window[eType])aBub.push(window);e.eventPhase=Event.BUBBLING_PHASE;if(!e.propagate(aBub,false))return false;}return true;};